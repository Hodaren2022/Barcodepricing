特價優先處理功能更新說明
=====================

功能目標：
當辨識資料有特價和原價時，應優先在總價欄位填入特價價格

實作變更總結：

1. AI OCR 辨識功能增強：
   - 修改了 AI 分析的 JSON Schema，新增 originalPrice 和 specialPrice 欄位
   - 更新系統提示詞，明確指示當同時存在原價和特價時的處理方式
   - listedPrice 欄位現在會優先使用特價（如果存在）

2. 價格計算工具增強：
   - 新增 calculateFinalPrice 函數來處理價格優先邏輯
   - 當同時存在原價和特價時，優先使用特價進行計算

3. 資料處理邏輯：
   - 在 handleAiCaptureSuccess 函數中，優先使用 specialPrice 作為最終價格
   - 在 saveAndComparePrice 函數中，使用 calculateFinalPrice 函數確定最終價格
   - 在 useEffect 鉤子中，使用 calculateFinalPrice 函數進行即時價格計算
   - 保留 originalPrice 和 specialPrice 資訊以便後續顯示

4. UI 顯示優化：
   - 在 AI 辨識結果區塊顯示原價和特價信息
   - 在價格歷史記錄中以刪除線顯示原價，以突出顯示特價
   - 在所有記錄頁面中同樣顯示原價和特價信息
   - 原價以刪除線顯示，特價以醒目的顏色顯示

5. 編輯功能增強：
   - 在編輯模式中新增原價和特價的輸入欄位
   - 保持與新增記錄時一致的價格處理邏輯

6. 資料儲存：
   - originalPrice 和 specialPrice 資料會儲存到 Firebase 中
   - 確保所有價格計算和比價功能基於消費者實際支付的價格（特價優先）

測試方式：
1. 使用「模擬 AI 分析成功」功能測試特價處理
2. 實際上傳包含原價和特價的圖片進行測試
3. 檢查歷史價格記錄中的顯示效果
4. 測試編輯功能中的價格輸入
5. 確認價格趨勢圖基於正確的價格數據繪製

技術細節：
- specialPrice 和 originalPrice 資料會儲存到 Firebase 中
- 價格顯示會根據是否存在特價來動態調整樣式
- 所有計算仍然使用實際支付價格（特價優先）以確保比價準確性
- 新增的 calculateFinalPrice 工具函數確保價格優先邏輯的一致性